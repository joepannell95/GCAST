<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GCAST – Sports IPTV Player</title>
  <style>
    :root{
      --bg:#0b0f14; --panel:#131a22; --text:#e7eef7; --muted:#99a7b5; --accent:#19c37d; --danger:#ff6363;
      --card:#0f141b; --border:#22303c;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font:14px/1.4 system-ui,Segoe UI,Roboto,Helvetica,Arial}
    header{display:flex;align-items:center;gap:12px;padding:12px 16px;border-bottom:1px solid var(--border);background:linear-gradient(180deg,#0f1720,#0c1218)}
    header h1{font-size:18px;margin:0}
    header .badge{font-size:12px;padding:2px 8px;border:1px solid var(--border);border-radius:999px;color:var(--muted)}
    #app{display:grid;grid-template-columns:300px 1fr;min-height:calc(100vh - 56px)}
    aside{border-right:1px solid var(--border);background:var(--panel);padding:12px;overflow:auto}
    main{display:grid;grid-template-rows:auto 1fr;}
    .controls{display:flex;gap:8px;flex-wrap:wrap;padding:10px;border-bottom:1px solid var(--border);background:var(--panel)}
    .controls input,.controls select{background:#0b1218;color:var(--text);border:1px solid var(--border);border-radius:10px;padding:8px 10px}
    .controls label{display:flex;align-items:center;gap:6px}

    .list{padding:12px;display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:10px;overflow:auto}
    .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:10px;display:flex;gap:10px;align-items:center;cursor:pointer;transition:transform .08s ease, border-color .1s}
    .card:hover{transform:translateY(-1px);border-color:#2b3b49}
    .logo{width:42px;height:42px;border-radius:10px;background:#0b1117;border:1px solid var(--border);display:grid;place-items:center;overflow:hidden}
    .logo img{width:100%;height:100%;object-fit:contain}
    .meta{min-width:0}
    .name{font-weight:600;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}
    .group{font-size:12px;color:var(--muted)}
    .warn{color:var(--danger);font-size:12px}

    .player{display:grid;grid-template-rows:auto 1fr;overflow:hidden}
    .now{padding:10px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:10px;background:var(--panel)}
    .now .dot{width:8px;height:8px;border-radius:50%;background:var(--accent);box-shadow:0 0 0 3px rgba(25,195,125,.18)}
    #video{width:100%;height:calc(100vh - 160px);background:#000}
    .footer{padding:8px 12px;color:var(--muted);font-size:12px;border-top:1px solid var(--border)}
    .toast{position:fixed;bottom:16px;right:16px;background:#10161f;border:1px solid var(--border);color:var(--text);padding:10px 12px;border-radius:10px;box-shadow:0 8px 30px rgba(0,0,0,.3);max-width:360px}
    .hidden{display:none}
    a{color:#7fd6b2}
  </style>
</head>
<body>
  <header>
    <h1>GCAST</h1>
    <span class="badge">Sports‑first FAST/FTA viewer</span>
    <span class="badge" title="FAST = Free Ad‑Supported TV; FTA = Free‑To‑Air">FAST · FTA</span>
  </header>
  <div id="app">
    <aside>
      <div style="display:grid;gap:10px">
        <input id="search" placeholder="Search channels…" />
        <select id="groupFilter"><option value="">All groups</option></select>
        <label><input type="checkbox" id="legalOnly" checked /> Show likely‑legal only</label>
        <button id="exportBtn" style="background:var(--accent);color:#06281a;border:none;border-radius:10px;padding:10px;font-weight:600">Export filtered as M3U</button>
        <p class="warn">⚠️ Some entries you provided appear to be premium/pay‑TV endpoints. Hosting or redistributing those publicly can violate rights. Keep this page for private testing, and publish only rights‑cleared FAST/FTA links.</p>
      </div>
    </aside>
    <main>
      <div class="controls">
        <span id="count"></span>
        <span id="status" class="warn"></span>
      </div>
      <div class="player">
        <div class="now"><span class="dot"></span><strong id="nowName">Select a channel…</strong><span id="nowGroup" style="color:var(--muted)"></span></div>
        <video id="video" controls playsinline></video>
        <div class="footer">Keyboard: ↑/↓ to move · Enter to play · <a href="#" id="copyUrl">Copy stream URL</a></div>
      </div>
      <div class="list" id="list"></div>
    </main>
  </div>
  <div id="toast" class="toast hidden"></div>

  <!-- hls.js for MPEG‑TS HLS playback in browsers -->
  <script src="https://cdn.jsdelivr.net/npm/hls.js@1"></script>
  <script>
  // Embed your playlist exactly as provided
  const M3U = `#EXTM3U
#EXTINF:-1 tvg-id="AbuDhabiSports1.ae" tvg-logo="https://i.imgur.com/6BVWk8z.png" group-title="Sports",Abu Dhabi Sports 1
https://vo-live-media.cdb.cdn.orange.com/Content/Channel/AbuDhabiSportsChannel1/HLS/index.m3u8
#EXTINF:-1 tvg-id="ACCDigitalNetwork.us" tvg-logo="https://i.imgur.com/V6Kaqha.png" group-title="Sports",ACC Digital Network
https://aegis-cloudfront-1.tubi.video/ce6650c2-26ea-4433-9276-8a5ebf3992cc/playlist.m3u8
#EXTINF:-1 tvg-id="ACCNetwork.us" tvg-logo="https://i.imgur.com/TpCkbT.png" group-title="Sports",ACC Network
https://fl3.moveonjoy.com/ACC_NETWORK/index.m3u8
#EXTINF:-1 tvg-id="ACLCornholeTV.us" tvg-logo="https://i.imgur.com/lBIq2ZD.png" group-title="Sports",ACL Cornhole TV
https://1815337252.rsc.cdn77.org/HLS/CORNHOLETV.m3u8
#EXTINF:-1 tvg-id="ActionSports.us@Germany" tvg-logo="https://i.imgur.com/xiTUsnA.png" group-title="Sports",Action Sports Germany
http://cfd-v4-service-channel-stitcher-use1-1.prd.pluto.tv/stitch/hls/channel/5be1be871843b56328bc3ef1/master.m3u8?serverSideAds=false
#EXTINF:-1 tvg-id="AdventureSportsTV.us@SD" tvg-logo="https://i.imgur.com/9oyc88J.png" group-title="Sports",Adventure Sports TV SD
http://cfd-v4-service-channel-stitcher-use1-1.prd.pluto.tv/stitch/hls/channel/63c9550df13a9b00078677a7/master.m3u8?serverSideAds=false
#EXTINF:-1 tvg-id="beINSportsUSA.us" tvg-logo="https://upload.wikimedia.org/wikipedia/commons/thumb/8/87/Bein_Sports_Logo.svg/512px-Bein_Sports_Logo.svg.png" group-title="Sports",beIN Sports USA
http://fl3.moveonjoy.com/BEIN_SPORTS/index.m3u8
#EXTINF:-1 tvg-id="beINSPORTSXTRA.us" tvg-logo="https://i.imgur.com/uJosqHh.png" group-title="Sports",beIN SPORTS XTRA
http://cfd-v4-service-channel-stitcher-use1-1.prd.pluto.tv/stitch/hls/channel/5df975e2b27cf5000921c102/master.m3u8?serverSideAds=false
#EXTINF:-1 tvg-id="beINSPORTSXTRAenEspanol.us" tvg-logo="https://i.imgur.com/V562tpO.png" group-title="Sports",beIN SPORTS XTRA en Espanol
http://cfd-v4-service-channel-stitcher-use1-1.prd.pluto.tv/stitch/hls/channel/60492fdd9989d30007ccd30a/master.m3u8?serverSideAds=false
#EXTINF:-1 tvg-id="BEKSports.us@West" tvg-logo="https://i.imgur.com/1l3t5jd.png" group-title="Sports",BEK Sports West
https://cdn3.wowza.com/5/ZWQ1K2NYTmpFbGsr/BEK-WOWZA-1/smil:BEKPRIMEW.smil/playlist.m3u8
#EXTINF:-1 tvg-id="BellatorMMA.us" tvg-logo="https://i.imgur.com/VBKoLHk.png" group-title="Sports",Bellator MMA
http://cfd-v4-service-channel-stitcher-use1-1.prd.pluto.tv/stitch/hls/channel/5ebc8688f3697d00072f7cf8/master.m3u8?serverSideAds=false
#EXTINF:-1 tvg-id="BigTenNetwork.us" tvg-logo="https://upload.wikimedia.org/wikipedia/en/thumb/3/39/Big_Ten_Network_Logo.svg/512px-Big_Ten_Network_Logo.svg.png",Big Ten Network
https://fl3.moveonjoy.com/BIG_TEN_NETWORK/index.m3u8
#EXTINF:-1 tvg-id="BilliardTV.us@SD" tvg-logo="https://i.imgur.com/BZijfKh.png" group-title="Sports",Billiard TV SD
http://cfd-v4-service-channel-stitcher-use1-1.prd.pluto.tv/stitch/hls/channel/65df0cff66eec8000897b3a4/master.m3u8?serverSideAds=false
#EXTINF:-1 tvg-id="BlueSport2.ch" tvg-logo="https://i.imgur.com/GTbOgdT.png" group-title="Sports",Blue Sport 2
http://62.210.211.188:2095/play/a00f
#EXTINF:-1 tvg-id="CBSSportsHQ.us" tvg-logo="https://i.imgur.com/q8BENJg.png" group-title="Sports",CBS Sports HQ
http://cfd-v4-service-channel-stitcher-use1-1.prd.pluto.tv/stitch/hls/channel/5e9f2c05172a0f0007db4786/master.m3u8?serverSideAds=false
#EXTINF:-1 tvg-id="CBSSportsNetworkUSA.us" tvg-logo="https://i.imgur.com/A8CnA8g.png" group-title="Sports",CBS Sports Network USA
https://fl3.moveonjoy.com/CBS_SPORTS_NETWORK/index.m3u8
#EXTINF:-1 tvg-id="EDGEsport.uk" tvg-logo="https://i.imgur.com/bgQ6kz7.png" group-title="Sports",EDGEsport
https://edgesports-sportstribal.amagi.tv/playlist.m3u8
#EXTINF:-1 tvg-id="ElevenSports1.pl" tvg-logo="https://i.imgur.com/AOu4FXH.png" group-title="Sports",Eleven Sports 1
http://9b129915.akadatel.com/iptv/83GA6FAV4DPTPQ/20068/index.m3u8
#EXTINF:-1 tvg-id="ESPNews.us" tvg-logo="https://upload.wikimedia.org/wikipedia/commons/thumb/1/1b/ESPNews.svg/512px-ESPNews.svg.png" group-title="News;Sports",ESPNews
https://fl3.moveonjoy.com/ESPN_NEWS/index.m3u8
#EXTINF:-1 tvg-id="ESPNU.us" tvg-logo="https://i.imgur.com/HiBrysh.png" group-title="Sports",ESPNU
https://fl3.moveonjoy.com/ESPN_U/index.m3u8
#EXTINF:-1 tvg-id="FanDuelSportsNetwork.us" tvg-logo="https://upload.wikimedia.org/wikipedia/commons/thumb/9/94/FanDuel_Sports_Network_logo.svg/330px-FanDuel_Sports_Network_logo.svg.png" group-title="Sports",FanDuel Sports Network
https://fl3.moveonjoy.com/PAC_12/index.m3u8
#EXTINF:-1 tvg-id="FanDuelTV.us" tvg-logo="https://i.imgur.com/1xD0AMC.png" group-title="Sports",FanDuel TV
https://fl3.moveonjoy.com/TVG/index.m3u8
#EXTINF:-1 tvg-id="FIFAPlus.pl" tvg-logo="https://i.imgur.com/l5iax42.png" group-title="Sports",FIFA+
https://a62dad94.wurl.com/master/f36d25e7e52f1ba8d7e56eb859c636563214f541/UmFrdXRlblRWLWV1X0ZJRkFQbHVzRW5nbGlzaF9ITFM/playlist.m3u8
#EXTINF:-1 tvg-id="Fight.us" tvg-logo="https://i.imgur.com/bBv4p5K.png" group-title="Sports",Fight
http://cfd-v4-service-channel-stitcher-use1-1.prd.pluto.tv/stitch/hls/channel/5812b0f2237a6ff45d16c3f9/master.m3u8?serverSideAds=false
#EXTINF:-1 tvg-id="FITE247.us" tvg-logo="https://i.imgur.com/ESV6qgH.png" group-title="Sports",FITE 24/7
https://d3d85c7qkywguj.cloudfront.net/scheduler/scheduleMaster/263.m3u8
#EXTINF:-1 tvg-id="FoxSports2.us@HD" tvg-logo="https://i.imgur.com/LHtxKI8.png" group-title="Sports",Fox Sports 2 HD
http://23.237.104.106:8080/USA_FS2/index.m3u8
#EXTINF:-1 tvg-id="FuboSportsNetwork.us" tvg-logo="https://i.imgur.com/qFNRJLb.png" group-title="Sports",Fubo Sports Network
https://apollo.production-public.tubi.io/live/ac-fubo.m3u8
#EXTINF:-1 tvg-id="FUELTV.at" tvg-logo="https://i.imgur.com/I8mviBy.png" group-title="Sports",FUEL TV
https://amg01074-fueltv-amg01074c1-firetv-us-3150.playouts.now.amagi.tv/playlist.m3u8
#EXTINF:-1 tvg-id="GamePlus.ca" tvg-logo="https://i.imgur.com/Lj69WbR.png" group-title="Sports",Game+
https://a-cdn.klowdtv.com/live2/fntsy_720p/playlist.m3u8
#EXTINF:-1 tvg-id="GolfChannel.us@SD" tvg-logo="https://i.imgur.com/Lgux6Ik.png" group-title="Sports",Golf Channel SD
https://fl3.moveonjoy.com/GOLF/index.m3u8
#EXTINF:-1 tvg-id="HardKnocks.ca" tvg-logo="https://i.imgur.com/nt9B6jx.png" group-title="Sports",Hard Knocks
https://d3uyzhwvmemdyf.cloudfront.net/v1/master/9d062541f2ff39b5c0f48b743c6411d25f62fc25/Hard-Knocks-DistroTV/109.m3u8
#EXTINF:-1 tvg-id="LacrosseTV.us" tvg-logo="https://yt3.googleusercontent.com/ytc/AIdro_m_xSJFydxZ9QBU-85OuchjmzS0Bo0_Tukmk7to8hBfyl8=s512-c-k-c0x00ffffff-no-rj" group-title="Sports",Lacrosse TV
https://1840769862.rsc.cdn77.org/FTF/LSN_SCTE.m3u8
#EXTINF:-1 tvg-id="MLB.us" tvg-logo="https://i.imgur.com/ym3su2J.png" group-title="Sports",MLB
http://cfd-v4-service-channel-stitcher-use1-1.prd.pluto.tv/stitch/hls/channel/5e66968a70f34c0007d050be/master.m3u8?serverSideAds=false
#EXTINF:-1 tvg-id="MLBNetwork.us" tvg-logo="https://i.imgur.com/sA5V39D.png" group-title="Sports",MLB Network
https://fl3.moveonjoy.com/MLB_NETWORK/index.m3u8
#EXTINF:-1 tvg-id="MSG.us" tvg-logo="https://i.imgur.com/SEQFh0P.png" group-title="Sports",MSG
https://fl3.moveonjoy.com/MSG/index.m3u8
#EXTINF:-1 tvg-id="NBATV.us" tvg-logo="https://upload.wikimedia.org/wikipedia/en/thumb/d/d2/NBA_TV.svg/512px-NBA_TV.svg.png" group-title="Sports",NBA TV
https://fl3.moveonjoy.com/NBA_TV/index.m3u8
#EXTINF:-1 tvg-id="NBATVCanada.ca@SD" tvg-logo="https://upload.wikimedia.org/wikipedia/en/a/a4/NBA_TV_Canada_2020.png" group-title="Sports",NBA TV Canada SD
http://user.scalecdn.co:8080/live/54706135/09221986/3092.m3u8
#EXTINF:-1 tvg-id="NBCSportsBayArea.us" tvg-logo="https://i.imgur.com/MTgUVKx.png" group-title="Sports",NBC Sports Bay Area
https://tvpass.org/live/nbc-sports-bay-area/hd
#EXTINF:-1 tvg-id="NBCSportsBoston.us" tvg-logo="https://upload.wikimedia.org/wikipedia/commons/thumb/9/93/NBC_Sports_Boston.png/512px-NBC_Sports_Boston.png" group-title="Sports",NBC Sports Boston
https://tvpass.org/live/nbc-sports-boston/hd
#EXTINF:-1 tvg-id="NBCSportsPhiladelphia.us" tvg-logo="https://upload.wikimedia.org/wikipedia/commons/thumb/0/01/NBC_Sports_Philadelphia.png/512px-NBC_Sports_Philadelphia.png" group-title="Sports",NBC Sports Philadelphia
https://tvpass.org/live/nbc-sports-philadelphia/hd
#EXTINF:-1 tvg-id="NFLChannel.us" tvg-logo="https://i.imgur.com/mPGtwAP.png" group-title="Sports",NFL Channel
http://cfd-v4-service-channel-stitcher-use1-1.prd.pluto.tv/stitch/hls/channel/5ced7d5df64be98e07ed47b6/master.m3u8?serverSideAds=false
#EXTINF:-1 tvg-id="NFLNetwork.us" tvg-logo="https://upload.wikimedia.org/wikipedia/en/thumb/8/8f/NFL_Network_logo.svg/512px-NFL_Network_logo.svg.png" group-title="Sports",NFL Network
https://fl3.moveonjoy.com/NFL_NETWORK/index.m3u8
#EXTINF:-1 tvg-id="NFLRedZone.us" tvg-logo="https://i.imgur.com/5lPqQj5.png" group-title="Sports",NFL RedZone
https://fl1.moveonjoy.com/NFL_RedZone/index.m3u8
#EXTINF:-1 tvg-id="NHLNetwork.us" tvg-logo="https://i.imgur.com/UNZ8bef.png" group-title="Sports",NHL Network
https://nhl-firetv.amagi.tv/playlist.m3u8
#EXTINF:-1 tvg-id="NHRATV.us" tvg-logo="https://i.imgur.com/jZgcm4k.png" group-title="Sports",NHRA TV
https://apollo.production-public.tubi.io/live/ac-nhra.m3u8
#EXTINF:-1 tvg-id="NitroCircus.us@SD" tvg-logo="https://i.imgur.com/Ri0sB6I.jpg" group-title="Sports",Nitro Circus SD
https://amg13231-actve-amg13231c1-rakuten-us-5604.playouts.now.amagi.tv/playlist.m3u8
#EXTINF:-1 tvg-id="OutdoorChannel.us" tvg-logo="https://i.imgur.com/Kh4MWaY.png" group-title="Outdoor",Outdoor Channel
https://cdn-apse1-prod.tsv2.amagi.tv/linear/amg00718-outdoorchannela-outdoortvnz-samsungnz/playlist.m3u8
#EXTINF:-1 tvg-id="Pac12Insider.us" tvg-logo="https://i.imgur.com/736QREy.png" group-title="Sports",Pac-12 Insider
https://pac12-firetv.amagi.tv/playlist.m3u8
#EXTINF:-1 tvg-id="PBRRidePass.us" tvg-logo="https://i.imgur.com/gUxH97E.png" group-title="Sports",PBR RidePass
http://cfd-v4-service-channel-stitcher-use1-1.prd.pluto.tv/stitch/hls/channel/60d39387706fe50007fda8e8/master.m3u8?serverSideAds=false
#EXTINF:-1 tvg-id="PGATour.us" tvg-logo="https://i.imgur.com/J0TY9dG.png" group-title="Sports",PGA Tour
http://cfd-v4-service-channel-stitcher-use1-1.prd.pluto.tv/stitch/hls/channel/5de94dacb394a300099fa22a/master.m3u8?serverSideAds=false
#EXTINF:-1 tvg-id="PlutoTVExtreme.us@France" tvg-logo="https://i.imgur.com/b1xrzns.png" group-title="Sports",Pluto TV Extreme France
http://cfd-v4-service-channel-stitcher-use1-1.prd.pluto.tv/stitch/hls/channel/5f8ed327f9e9b0000761141e/master.m3u8?serverSideAds=false
#EXTINF:-1 tvg-id="PlutoTVSport.us@Italy" tvg-logo="https://i.imgur.com/y22ElOr.png" group-title="Sports",Pluto TV Sport Italy
https://stitcher-ipv4.pluto.tv/v1/stitch/embed/hls/channel/608030eff4b6f70007e1684c/master.m3u8
#EXTINF:-1 tvg-id="PlutoTVSports.us@France" tvg-logo="https://i.imgur.com/Fc3NQAI.png" group-title="Sports",Pluto TV Sports France
http://cfd-v4-service-channel-stitcher-use1-1.prd.pluto.tv/stitch/hls/channel/6081310e48d3200007afaf3b/master.m3u8?serverSideAds=false
#EXTINF:-1 tvg-id="PokerGo.us" tvg-logo="https://i.imgur.com/1603HED.png" group-title="Sports",PokerGo
http://cfd-v4-service-channel-stitcher-use1-1.prd.pluto.tv/stitch/hls/channel/5fc54366b04b2300072e31af/master.m3u8?serverSideAds=false
#EXTINF:-1 tvg-id="RedBullTV.at" tvg-logo="https://i.postimg.cc/8c78JM28/image.png" group-title="Sports",Red Bull TV
https://3ea22335.wurl.com/master/f36d25e7e52f1ba8d7e56eb859c636563214f541/UmFrdXRlblRWLWdiX1JlZEJ1bGxUVl9ITFM/playlist.m3u8
#EXTINF:-1 tvg-id="RightNowTV.us" tvg-logo="https://i.imgur.com/OxbIla4.png" group-title="Entertainment;Sports",Right Now TV
https://2-fss-1.streamhoster.com/pl_154/amlst:205448-2145652/rightnowtv.m3u8
#EXTINF:-1 tvg-id="SkySport1.nz" tvg-logo="https://i.imgur.com/ThJHEuN.png" group-title="Sports",Sky Sport 1
http://primestreams.tv:826/live/SF11/vulwBvtfo9/118585.ts
#EXTINF:-1 tvg-id="SportsConnect.za" tvg-logo="https://i.imgur.com/0sNWg54.png" group-title="Sports",Sports Connect
https://origin3.afxp.telemedia.co.za/PremiumFree/sportsconnect/playlist.m3u8
#EXTINF:-1 tvg-id="SportsGrid.us" tvg-logo="https://i.imgur.com/ulGKX30.png" group-title="Sports",SportsGrid
https://amg00315-sportsgrid-firetv.amagi.tv/playlist.m3u8
#EXTINF:-1 tvg-id="SportsmanChannel.us" tvg-logo="https://i.imgur.com/CXauv8M.png" group-title="Sports",Sportsman Channel
https://fl3.moveonjoy.com/SPORTSMAN_CHANNEL/index.m3u8
#EXTINF:-1 tvg-id="SportsNetNewYork.us" tvg-logo="https://upload.wikimedia.org/wikipedia/commons/thumb/1/1c/SNY_logo.svg/512px-SNY_logo.svg.png" group-title="Sports",SportsNet New York
https://fl3.moveonjoy.com/SNY/index.m3u8
#EXTINF:-1 tvg-id="Stadium.us" tvg-logo="https://upload.wikimedia.org/wikipedia/en/thumb/5/53/Stadium_%28sports_network%29_logo.svg/512px-Stadium_%28sports_network%29_logo.svg.png" group-title="Sports",Stadium
https://apollo.production-public.tubi.io/live/ac-stadium2.m3u8
#EXTINF:-1 tvg-id="Strongman.us@Germany" tvg-logo="https://i.imgur.com/bVQBF6R.png" group-title="Sports",Strongman Germany
http://cfd-v4-service-channel-stitcher-use1-1.prd.pluto.tv/stitch/hls/channel/5e1452156c07b50009d0230e/master.m3u8?serverSideAds=false
#EXTINF:-1 tvg-id="SwerveSports.us" tvg-logo="https://i.imgur.com/GT0Yi2T.png" group-title="Sports",Swerve Sports
https://linear-253.frequency.stream/dist/xumo/253/hls/master/playlist.m3u8
#EXTINF:-1 tvg-id="talkSPORT.uk" tvg-logo="https://upload.wikimedia.org/wikipedia/en/9/9d/Talksport_logo.png" group-title="Sports",talkSPORT
https://af7a8b4e.wurl.com/master/f36d25e7e52f1ba8d7e56eb859c636563214f541/TEctZ2JfdGFsa1NQT1JUX0hMUw/playlist.m3u8
#EXTINF:-1 tvg-id="TennisChannel.us" tvg-logo="https://i.imgur.com/tsljAnY.png" group-title="Sports",Tennis Channel
https://cdn-ue1-prod.tsv2.amagi.tv/linear/amg01444-tennischannelth-tennischannelnl-samsungnl/playlist.m3u8
#EXTINF:-1 tvg-id="TSNTheOcho.ca@SD" tvg-logo="https://tvpnlogopus.samsungcloud.tv/platform/image/sourcelogo/vc/00/02/34/CA1400003R3_20240709T002034SQUARE.png" group-title="Sports",TSN The Ocho SD
https://d3pnbvng3bx2nj.cloudfront.net/v1/master/3722c60a815c199d9c0ef36c5b73da68a62b09d1/cc-rds8g35qfqrnv/TSN_The_Ocho.m3u8
#EXTINF:-1 tvg-id="TVSBowlingNetwork.us" tvg-logo="https://www.watchyour.tv/channels/logo/tvs-bowling-network.jpg" group-title="Sports",TVS Bowling Network
https://rpn.bozztv.com/gusa/gusa-tvsbowling/index.m3u8
#EXTINF:-1 tvg-id="TVSClassicSports.us" tvg-logo="https://i.imgur.com/auR0Mi6.png" group-title="Sports",TVS Classic Sports
https://rpn.bozztv.com/gusa/gusa-tvs/index.m3u8
#EXTINF:-1 tvg-id="TVSSports.us" tvg-logo="https://i.imgur.com/Lwwq62E.png" group-title="Sports",TVS Sports
https://rpn.bozztv.com/gusa/gusa-tvssports/index.m3u8
#EXTINF:-1 tvg-id="YesNetwork.us" tvg-logo="https://upload.wikimedia.org/wikipedia/commons/thumb/b/be/YES_Network_logo.svg/330px-YES_Network_logo.svg.png",Yes Network
https://fl3.moveonjoy.com/YES_NETWORK/index.m3u8`;

  const LEGAL_HOSTS = [
    'tubi.video','production-public.tubi.io','pluto.tv','amagi.tv','wurl.com','cloudfront.net','streamhoster.com','cdn77.org','telemedia.co.za'
  ];

  function parseM3U(text){
    const lines = text.split(/\r?\n/).map(l=>l.trim()).filter(Boolean);
    if(!/^#EXTM3U/i.test(lines[0]||'')) console.warn('Missing #EXTM3U header');
    const items=[];
    for(let i=0;i<lines.length;i++){
      if(lines[i].startsWith('#EXTINF')){
        const meta = lines[i];
        const url = lines[i+1]||''; i++;
        const name = (meta.split(',')[1]||'').trim();
        const attrs={};
        meta.replace(/(\w+?)="([^"]*)"/g,(m,k,v)=>{attrs[k]=v});
        const u = new URL(url, location.href);
        const host = u.hostname;
        items.push({name,url,logo:attrs['tvg-logo']||'',group:attrs['group-title']||'',id:attrs['tvg-id']||'',host});
      }
    }
    return items;
  }

  const all = parseM3U(M3U);
  const listEl = document.getElementById('list');
  const groupFilter = document.getElementById('groupFilter');
  const search = document.getElementById('search');
  const legalOnly = document.getElementById('legalOnly');
  const count = document.getElementById('count');
  const status = document.getElementById('status');
  const toast = document.getElementById('toast');

  // Build group filter options
  const groups = Array.from(new Set(all.map(x=>x.group).filter(Boolean))).sort();
  groups.forEach(g=>{const o=document.createElement('option');o.value=g;o.textContent=g;groupFilter.appendChild(o)});

  function isLikelyLegal(item){
    return LEGAL_HOSTS.some(h=>item.host.endsWith(h));
  }

  function filtered(){
    const q=(search.value||'').toLowerCase();
    const g=groupFilter.value||'';
    return all.filter(it=>{
      if(legalOnly.checked && !isLikelyLegal(it)) return false;
      if(g && it.group!==g) return false;
      if(q && !(it.name.toLowerCase().includes(q)||it.host.toLowerCase().includes(q))) return false;
      return true;
    }).sort((a,b)=>a.name.localeCompare(b.name));
  }

  function render(){
    const rows = filtered();
    listEl.innerHTML='';
    rows.forEach((it,idx)=>{
      const card=document.createElement('div');card.className='card';card.tabIndex=0;
      const logo=document.createElement('div');logo.className='logo';
      const img=new Image();img.src=it.logo;img.alt='';logo.appendChild(img);
      const meta=document.createElement('div');meta.className='meta';
      const name=document.createElement('div');name.className='name';name.textContent=it.name||'(unnamed)';
      const group=document.createElement('div');group.className='group';group.textContent=it.group||it.host;
      if(!isLikelyLegal(it)) group.innerHTML += ' · <span class="warn">premium?</span>';
      meta.appendChild(name);meta.appendChild(group);
      card.appendChild(logo);card.appendChild(meta);
      card.addEventListener('click',()=> play(it));
      card.addEventListener('keydown',(e)=>{if(e.key==='Enter') play(it)});
      listEl.appendChild(card);
    });
    count.textContent = `${rows.length} / ${all.length} channels`;
  }

  // Player
  let hls; const video=document.getElementById('video');
  const nowName=document.getElementById('nowName');
  const nowGroup=document.getElementById('nowGroup');
  function showToast(msg){toast.textContent=msg;toast.classList.remove('hidden');setTimeout(()=>toast.classList.add('hidden'),4000)}
  function play(item){
    nowName.textContent=item.name; nowGroup.textContent = item.group?`· ${item.group}`:'';
    // Dispose previous
    if(hls){hls.destroy();hls=null}
    const src=item.url;
    // Copy URL link
    document.getElementById('copyUrl').onclick=(e)=>{e.preventDefault();navigator.clipboard.writeText(src).then(()=>showToast('Stream URL copied'))}
    if(Hls.isSupported()){
      hls = new Hls({enableWorker:true,lowLatencyMode:true,backBufferLength:60});
      hls.on(Hls.Events.ERROR, (_,data)=>{
        console.warn('HLS error',data);
        if(data?.fatal){showToast('Playback error (possibly CORS, DRM, or geo‑blocked).');}
      });
      hls.loadSource(src);
      hls.attachMedia(video);
    } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
      video.src = src;
    } else {
      showToast('HLS not supported in this browser');
    }
    video.play().catch(()=>{});
  }

  // Export filtered list
  document.getElementById('exportBtn').onclick=()=>{
    const rows=filtered();
    const out=['#EXTM3U',...rows.flatMap(it=>[`#EXTINF:-1 tvg-id="${it.id}" tvg-logo="${it.logo}" group-title="${it.group}",${it.name}`,it.url])].join('\n');
    const blob=new Blob([out],{type:'text/plain'});
    const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download='gcast_filtered.m3u';a.click();
  }

  // Keyboard nav – move focus within grid
  document.addEventListener('keydown',e=>{
    const cards=[...document.querySelectorAll('.card')];
    const active=document.activeElement; const idx=cards.indexOf(active);
    if(e.key==='ArrowDown'){e.preventDefault();(cards[idx+1]||cards[0])?.focus();}
    if(e.key==='ArrowUp'){e.preventDefault();(cards[idx-1]||cards[cards.length-1])?.focus();}
  });

  search.oninput=render; groupFilter.onchange=render; legalOnly.onchange=render;
  render();
  // Auto‑select first visible legal channel
  const first = filtered()[0]; if(first) play(first);
  </script>
</body>
</html>
